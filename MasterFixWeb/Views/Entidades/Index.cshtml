@{
    ViewData["Title"] = "Index";
}

<h2>Index</h2>

<p>
    <a asp-action="Create">Create New</a>
</p>

@await Html.PartialAsync("_listaEntidades")

<div class="modal fade" id="EntidadeModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">


</div>



<script type="text/javascript">
function del(){
    $.ajax({
           url: "/entidades/Delete",
           type: "POST",
           data: $('#editForm').serialize(),
           async: false,
           success: function(result)
           {
                $('#EntidadeModal').modal('hide');
                    setTimeout(function(){
                        $('body').html(result);
                    }, 150);
            }      
         });
}

function edit(){
        $.validator.unobtrusive.parse('form[id=editForm]');
        if ($('form[id=editForm]').valid()) {
    $.ajax({
           url: "/entidades/edit",
           type: "POST",
           data: $('#editForm').serialize(), // serializes the form's elements.
           async: true,
           success: function(result)
           {
                $('#EntidadeModal').modal('hide');
                    setTimeout(function(){
                        $('div[name=_partialEntidade]').replaceWith(result);
                    }, 150);
            }      
         });
        }
}

function modal(id){
$.ajax({
    url: "/entidades/getEntidade",
    type: "POST",
    data: {id : id},
    async: true,
    success: function( result ) {
        $('div[id=EntidadeModal]').replaceWith(result);
        $('#EntidadeModal').modal('toggle');
  },
    error: function() { 
        alert("Connection failed, please try again."); 
    }
});
}
</script>